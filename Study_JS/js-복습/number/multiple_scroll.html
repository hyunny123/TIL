<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Number Animation</title>
  <style>
    .rate{
      height: 25px;
      position: relative;
      border:2px solid #ccc;
    }
    .rate .bar{
      position: absolute;
      left: 0;top: 0;bottom: 0;
      width: 0;
      background: #3498db;
    }
    .rate span{
      position: absolute;
      right: 20px; top: 0; bottom: 0; line-height: 25px;
      font-weight: bold;
    }
    section{
      height: 100vh;
    }
  </style>
</head>
<body>
  <section>
    <h2>content title</h2>
  </section>
  <div class="animation">
    <div class="rate" data-num="45">
      <div class="bar"></div>
      <span>0</span>
    </div>
    <div class="rate" data-num="75">
      <div class="bar"></div>
      <span>0</span>
    </div>
    <div class="rate" data-num="25">
      <div class="bar"></div>
      <span>0</span>
    </div>
  </div>
  <section>
    <h2>content title</h2>
  </section>
  <script>
    let rate = document.querySelectorAll('.rate'); //.rate
    let rateOST = document.querySelector('.animation').offsetTop - 500;
    let myswitch = false;

    window.addEventListener('scroll',()=>{
        if(window.scrollY > rateOST){
            if(myswitch == false){
              for(let r of rate){
                let targetNum = Number(r.dataset.num);
                let span = r.querySelector('span');
                let bar = r.querySelector('.bar');
                let num = 0;

                let animation = setInterval(()=>{
                  span.innerText = ++num;
                  if(targetNum === num){
                    clearInterval(animation);
                  }
                  //bar의 너비를 변경
                  bar.style.width = num + '%';
                  }, 10);  
                }
              myswitch = true;
            }
        }
      });



  </script>
</body>
</html>